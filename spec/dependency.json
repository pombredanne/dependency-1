{
    "name": "dependency",

    "imports": [
	{ "uri": "http://www.apidoc.me/flow/common/0.0.1-dev/service.json" },
	{ "uri": "http://www.apidoc.me/flow/user/0.0.1-dev/service.json" }
    ],

    "enums": {
	"scms": {
	    "values": [
		{ "name": "github" }
	    ]
	},

	"programming_language": {
	    "values": [
		{ "name": "scala" }
	    ]
	}
    },

    "models": {
	    
	"language": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "name", "type": "programming_language" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"language_form": {
	    "fields": [
		{ "name": "name", "type": "string" },
		{ "name": "version", "type": "string", "description": "If provided, we automatically record this version of theacc language." }
	    ]
	},

	"language_version": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "language", "type": "language" },
		{ "name": "version", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"project_language_version": {
	    "description": "A projection of projects and the specific language versions the project is dependent on",
	    "fields": [
		{ "name": "project", "type": "project" },
		{ "name": "language_version", "type": "language_version" }
	    ]
	},	    
	
	"library": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "resolvers", "type": "[string]" },
		{ "name": "group_id", "type": "string" },
		{ "name": "artifact_id", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"library_form": {
	    "fields": [
		{ "name": "group_id", "type": "string" },
		{ "name": "resolvers", "type": "[string]" },
		{ "name": "artifact_id", "type": "string" },
		{ "name": "version", "type": "version_form", "required": false, "description": "If provided, we automatically record this version of this library." }
	    ]
	},

	"version_form": {
	    "fields": [
		{ "name": "version", "type": "string", "example": "1.0.0" },
		{ "name": "cross_build_version", "type": "string", "example": "2.11", "required": false }
	    ]
	},

	"library_version": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "library", "type": "library" },
		{ "name": "version", "type": "string" },
		{ "name": "cross_build_version", "type": "string", "required": false },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},
	
	"project": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "scms", "type": "scms" },
		{ "name": "name", "type": "string" },
		{ "name": "uri", "type": "string" },
                { "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"project_library_version": {
	    "description": "A projection of projects and the specific library versions the project is dependent on",
	    "fields": [
		{ "name": "project", "type": "project" },
		{ "name": "library_version", "type": "library_version" }
	    ]
	},	    
	
	"project_form": {
	    "fields": [
		{ "name": "name", "type": "string" },
		{ "name": "scms", "type": "scms" },
		{ "name": "uri", "type": "string" }
	    ]
	},
	
	"repository": {
	    "fields": [
		{ "name": "name", "type": "string" },
		{ "name": "uri", "type": "string" }
	    ]
	},
	
	"project_patch_form": {
	    "fields": [
		{ "name": "name", "type": "string", "required": false },
		{ "name": "scms", "type": "scms", "required": false },
		{ "name": "uri", "type": "string", "required": false }
	    ]
	},

	"library_recommendation": {
	    "fields": [
		{ "name": "from", "type": "library_version" },
		{ "name": "to", "type": "library_version" },
		{ "name": "latest", "type": "library_version" }
	    ]
	},
	
	"language_recommendation": {
	    "fields": [
		{ "name": "from", "type": "language_version" },
		{ "name": "to", "type": "language_version" },
		{ "name": "latest", "type": "language_version" }
	    ]
	},

	"github_user_form": {
	    "fields": [
		{ "name": "user_guid", "type": "uuid" },
		{ "name": "id", "type": "long" },
		{ "name": "login", "type": "string" }
	    ]
	},
	
	"github_user": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
                { "name": "user", "type": "io.flow.common.v0.models.reference" },
		{ "name": "id", "type": "long" },
		{ "name": "login", "type": "string" },
                { "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"github_authentication_form": {
	    "description": "Used to authenticate user based on the oauth code we receive from github",
	    "fields": [
                { "name": "code", "type": "string" }
            ]
	},

	"token": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
                { "name": "user", "type": "io.flow.common.v0.models.reference" },
		{ "name": "tag", "type": "string" },
		{ "name": "token", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"token_form": {
	    "fields": [
		{ "name": "user_guid", "type": "uuid" },
		{ "name": "tag", "type": "string" },
		{ "name": "token", "type": "string" }
	    ]
	},
	
	"watch_project": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
                { "name": "user", "type": "io.flow.common.v0.models.reference" },
                { "name": "project", "type": "project" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"watch_project_form": {
	    "fields": [
		{ "name": "user_guid", "type": "uuid" },
		{ "name": "project_guid", "type": "uuid" }
	    ]
	}
	
    },

    "resources": {

	"io.flow.common.v0.models.healthcheck": {
	    "path": "/_internal_",
            "operations": [
                {
                    "method": "GET",
		    "path": "/healthcheck",
                    "responses": {
                        "200": { "type": "io.flow.common.v0.models.healthcheck" }
                    }
                }
	    ]
	},

	"github_user": {
	    "path": "/authentications",
	    "operations": [
		{
		    "method": "POST",
		    "path": "/github",
		    "description": "Used to authenticate a user via github",
		    "body": { "type": "github_authentication_form" },
                    "responses": {
                        "200": { "type": "io.flow.user.v0.models.user" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
		    }
		}
	    ]
	},
	
	"io.flow.user.v0.models.user": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search for a specific user. You must specify at least 1 parameter - either a guid or email - and will receive back either 0 or 1 users.",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find user with this guid. Exact match", "required": false },
                        { "name": "email", "type": "string", "description": "Find user with this email address. Case in-sensitive. Exact match", "required": false }
                    ],
                    "responses": {
                        "200": { "type": "[io.flow.user.v0.models.user]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the user with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "io.flow.user.v0.models.user" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new user.",
                    "body": { "type": "io.flow.user.v0.models.user_form" },
                    "responses": {
                        "201": { "type": "io.flow.user.v0.models.user" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                }
            ]
        },

	"project": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search projects. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find project with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "name", "type": "string", "description": "Find project with this name. Case in-sensitive. Exact match", "required": false },
                        { "name": "group_id", "type": "string", "description": "Find projects that are dependent on a library with this group ID. Exact match", "required": false },
                        { "name": "artifact_id", "type": "string", "description": "Find projects that are dependent on a library with this artifact ID. Exact match", "required": false },
                        { "name": "version", "type": "string", "description": "Find projects that are dependent on a library with this version number. Exact match", "required": false },
                        { "name": "library_guid", "type": "uuid", "description": "Find projects that are dependent on a library", "required": false },
                        { "name": "library_version_guid", "type": "uuid", "description": "Find projects that are dependent on a specific library version", "required": false },
                        { "name": "language", "type": "string", "description": "Find projects that are dependent on this language. Case in-sensitive. Exact match", "required": false },
                        { "name": "language_guid", "type": "uuid", "description": "Find projects that are dependent on a language", "required": false },
                        { "name": "language_version_guid", "type": "uuid", "description": "Find projects that are dependent on a language", "required": false },
			{ "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[project]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the project with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "project" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new project.",
                    "body": { "type": "project_form" },
                    "responses": {
                        "201": { "type": "project" },
                        "401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

                {
                    "method": "PUT",
		    "path": "/:guid",
                    "description": "Update an existing project.",
                    "body": { "type": "project_form" },
                    "responses": {
                        "200": { "type": "project", "description": "Project successfully updated" },
                        "401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

                {
                    "method": "PATCH",
		    "path": "/:guid",
                    "description": "Patch an existing project",
                    "body": { "type": "project_patch_form" },
                    "responses": {
                        "200": { "type": "project", "description": "Project successfully updated" },
                        "401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

		{
		    "method": "DELETE",
		    "path": "/:guid",
                    "responses": {
                        "204": { "type": "unit" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }
            ]
        },

	"library": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search libraries. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find library with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "project_guid", "type": "uuid", "description": "Find languages associated with this project", "required": false },
                        { "name": "group_id", "type": "string", "description": "Find library with this group_id. Case sensitive. Exact match", "required": false },
                        { "name": "artifact_id", "type": "string", "description": "Find library with this artifact_id. Case sensitive. Exact match", "required": false },
                        { "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[library]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the library with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "library" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new library.",
                    "body": { "type": "library_form" },
                    "responses": {
                        "201": { "type": "library" },
                        "401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

		{
		    "method": "DELETE",
		    "path": "/:guid",
                    "responses": {
                        "204": { "type": "unit" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }
            ]
        },

	"library_version": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search library versions. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find library version with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "library_guid", "type": "uuid", "description": "Find languages associated with this language", "required": false },
                        { "name": "project_guid", "type": "uuid", "description": "Find languages associated with this project", "required": false },
                        { "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[library_version]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the library version with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "library_version" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }

            ]
        },

	"language": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search languages. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find language with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "project_guid", "type": "uuid", "description": "Find languages associated with this project", "required": false },
                        { "name": "name", "type": "string", "description": "Find project with this name. Case in-sensitive. Exact match", "required": false },
                        { "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[language]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the language with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "language" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new language.",
                    "body": { "type": "language_form" },
                    "responses": {
                        "201": { "type": "language" },
                        "401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

		{
		    "method": "DELETE",
		    "path": "/:guid",
                    "responses": {
                        "204": { "type": "unit" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }
            ]
        },

	"project_library_version": {
	    "operations": [
		{
                    "method": "GET",
                    "description": "Get detailed information on every project using this library, including the precise version",
                    "parameters": [
			{ "name": "project_guid", "type": "uuid", "description": "Filter for this project", "required": false },
			{ "name": "library_guid", "type": "uuid", "description": "Filter for this library", "required": false },
			{ "name": "library_version_guid", "type": "uuid", "description": "Filter for this library version", "required": false },
			{ "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
			{ "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
			"200": { "type": "[project_library_version]" },
			"401": { "type": "unit" }
                    }
		}
	    ]
	},

	"language_version": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search language versions. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find language version with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "language_guid", "type": "uuid", "description": "Find languages associated with this language", "required": false },
                        { "name": "project_guid", "type": "uuid", "description": "Find languages associated with this project", "required": false },
                        { "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[language_version]" },
                        "401": { "type": "unit" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the language version with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "language_version" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }

            ]
        },

	"project_language_version": {
	    "operations": [
		{
                    "method": "GET",
                    "description": "Get detailed information on every project using this language, including the precise version",
                    "parameters": [
			{ "name": "project_guid", "type": "uuid", "description": "Filter for this project", "required": false },
			{ "name": "language_guid", "type": "uuid", "description": "Filter for this language", "required": false },
			{ "name": "language_version_guid", "type": "uuid", "description": "Filter for this language version", "required": false },
			{ "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
			{ "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
			"200": { "type": "[project_language_version]" },
			"401": { "type": "unit" }
                    }
		}
	    ]
	},

	"library_recommendation": {
	    "path": "/recommendations/libraries",

	    "operations": [
		{
                    "method": "GET",
		    "path": "/projects/:project_guid",
                    "description": "Get recommendations for which libraries to upgrade",
                    "parameters": [
			{ "name": "project_guid", "type": "uuid" }
                    ],
                    "responses": {
			"200": { "type": "[library_recommendation]" },
			"401": { "type": "unit" }
                    }
		}
	    ]
	},
	
	"language_recommendation": {
	    "path": "/recommendations/languages",

	    "operations": [
		{
                    "method": "GET",
		    "path": "/projects/:project_guid",
                    "description": "Get recommendations for which languages to upgrade",
                    "parameters": [
			{ "name": "project_guid", "type": "uuid" }
                    ],
                    "responses": {
			"200": { "type": "[language_recommendation]" },
			"401": { "type": "unit" }
                    }
		}
	    ]
	},

	"repository": {
	    "operations": [
		{
                    "method": "GET",
		    "path": "/github",
                    "description": "Returns a list of repositories from github",
                    "parameters": [
			{ "name": "name", "type": "string", "required": false, "description": "Optionally filter by repo name. Case in-sensitive. Exact match" },
			{ "name": "existing_project", "type": "boolean", "required": false, "description": "Optionally filter by repositories that are either already mapped to existing projects or not" },
			{ "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
			{ "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
			"200": { "type": "[repository]" },
			"401": { "type": "unit" }
                    }
		}
	    ]
	},

	"watch_project": {
	    "path": "/watches/projects",

	    "operations": [
		{
                    "method": "GET",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find language version with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
			{ "name": "user_guid", "type": "uuid", "required": false },
			{ "name": "project_guid", "type": "uuid", "required": false },
			{ "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
			{ "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
			"200": { "type": "[watch_project]" },
			"401": { "type": "unit" }
                    }
		},

		{
		    "method": "GET",
		    "path": "/:guid",
                    "responses": {
                        "200": { "type": "watch_project" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                },
		
		{
		    "method": "POST",
		    "body": { "type": "watch_project_form" },
                    "responses": {
			"200": { "type": "watch_project", "description": "User was already watching this project. Existing record returned" },
			"201": { "type": "watch_project", "description": "Watch record created and returned" },
			"401": { "type": "unit" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
		},

		{
		    "method": "DELETE",
		    "path": "/:guid",
                    "responses": {
                        "204": { "type": "unit" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }
		
	    ]
	}	
	    
    }

}
