@(person: com.bryzek.dependency.api.lib.Person,
  urls: com.bryzek.dependency.api.lib.Urls,
  recommendations: Seq[com.bryzek.dependency.v0.models.Recommendation],
  lastEmail: Option[db.LastEmail]
)

@if(!person.name.first.isEmpty) {
  <p>Dear @person.name.first.get,</p>
}

@if(lastEmail.isEmpty) {
  <p>

    Thanks for subscribing to your personalized daily summary of
    dependency recommendations. At any time, you can unsubscribe
    by visiting <a href="@urls.www(routes.SubscriptionsController.index())">@urls.wwwHost@routes.SubscriptionsController.index()</a>

  </p>

} else {

  <p>
  </p>

}
<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Project</th>
      <th>Name</th>
      <th>Current</th>
      <th>Recommended</th>
    </tr>
  </thead>
  @recommendations.map { rec =>
    <tr>
      <td>@io.flow.play.util.DateHelper.shortDate(rec.audit.createdAt)</td>
      <td><a href="@urls.www(routes.ProjectsController.show(rec.project.guid))">@com.bryzek.dependency.lib.Text.truncate(rec.project.name, 50)</a></td>
      <td><a href="@urls.www(com.bryzek.dependency.lib.Urls.recommendationUrl(rec))">@com.bryzek.dependency.lib.Text.truncate(rec.name, 50)</a></td>
      <td>@rec.from</td>
      <td>@rec.to</td>
    </tr>
  }
</table>
  
@footer(urls)
