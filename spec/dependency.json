{
    "name": "dependency",

    "imports": [
	{ "uri": "http://www.apidoc.me/flow/common/0.0.1-dev/service.json" },
	{ "uri": "http://www.apidoc.me/flow/user/0.0.1-dev/service.json" }
    ],

    "enums": {
	"scms": {
	    "values": [
		{ "name": "git_hub" }
	    ]
	},

	"programming_language": {
	    "values": [
		{ "name": "scala" }
	    ]
	}
    },

    "models": {
	    
        "authentication_form": {
	    "description": "Used to authenticate user. For first iteration just requires email",
	    "fields": [
                { "name": "email", "type": "string" }
            ]
	},

	"language": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "name", "type": "programming_language" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"language_form": {
	    "fields": [
		{ "name": "name", "type": "string" },
		{ "name": "version", "type": "string", "required": false, "description": "If provided, we automatically record this version of the language." }
	    ]
	},

	"language_version": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "version", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},
	
	"library": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "resolvers", "type": "[string]" },
		{ "name": "group_id", "type": "string" },
		{ "name": "artifact_id", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},

	"library_form": {
	    "fields": [
		{ "name": "group_id", "type": "string" },
		{ "name": "resolvers", "type": "[string]" },
		{ "name": "artifact_id", "type": "string" },
		{ "name": "version", "type": "string", "required": false, "description": "If provided, we automatically record this version of this library." }
	    ]
	},

	"library_version": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "version", "type": "string" },
		{ "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},
	
	"project": {
	    "fields": [
		{ "name": "guid", "type": "uuid" },
		{ "name": "scms", "type": "scms" },
		{ "name": "name", "type": "string" },
		{ "name": "uri", "type": "string" },
                { "name": "audit", "type": "io.flow.common.v0.models.audit" }
	    ]
	},
	
	"project_form": {
	    "fields": [
		{ "name": "name", "type": "string" },
		{ "name": "scms", "type": "scms" },
		{ "name": "uri", "type": "string" }
	    ]
	}
	
    },

    "resources": {

	"io.flow.common.v0.models.healthcheck": {
	    "path": "/_internal_",
            "operations": [
                {
                    "method": "GET",
		    "path": "/healthcheck",
                    "responses": {
                        "200": { "type": "io.flow.common.v0.models.healthcheck" }
                    }
                }
	    ]
	},

	"io.flow.user.v0.models.user": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search for a specific user. You must specify at least 1 parameter - either a guid or email - and will receive back either 0 or 1 users.",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find user with this guid. Exact match", "required": false },
                        { "name": "email", "type": "string", "description": "Find user with this email address. Case in-sensitive. Exact match", "required": false }
                    ],
                    "responses": {
                        "200": { "type": "[io.flow.user.v0.models.user]" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the user with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "io.flow.user.v0.models.user" },
                        "404": { "type": "unit" }
                    }
                },

		{
		    "method": "POST",
		    "path": "/authenticate",
		    "description": "Used to authenticate a user with an email address and password. Successful authentication returns an instance of the user model. Failed authorizations of any kind are returned as a generic error with code user_authorization_failed.",
		    "body": { "type": "authentication_form" },
                    "responses": {
                        "200": { "type": "io.flow.user.v0.models.user" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
		    }
		},

                {
                    "method": "POST",
                    "description": "Create a new user.",
                    "body": { "type": "io.flow.user.v0.models.user_form" },
                    "responses": {
                        "201": { "type": "io.flow.user.v0.models.user" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                }
            ]
        },

	"project": {
            "operations": [
                {
                    "method": "GET",
                    "description": "Search projects. Results are paginated",
                    "parameters": [
                        { "name": "guid", "type": "uuid", "description": "Find project with this guid. Exact match", "required": false },
			{ "name": "guids", "type": "[uuid]", "description": "Filter by any one of these guids", "required": false },
                        { "name": "name", "type": "string", "description": "Find project with this name. Case in-sensitive. Exact match", "required": false },
                        { "name": "limit", "type": "long", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "long", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[project]" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the project with this guid.",
                    "path": "/:guid",
                    "responses": {
                        "200": { "type": "project" },
                        "404": { "type": "unit" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new project.",
                    "body": { "type": "project_form" },
                    "responses": {
                        "201": { "type": "project" },
                        "409": { "type": "[io.flow.common.v0.models.error]" }
                    }
                },

		{
		    "method": "DELETE",
		    "path": "/:guid",
                    "responses": {
                        "204": { "type": "unit" },
                        "401": { "type": "unit" },
                        "404": { "type": "unit" }
                    }
                }
            ]
        }
    }

}
