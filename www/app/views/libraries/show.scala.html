@(
  data: com.bryzek.dependency.lib.UiData,
  library: com.bryzek.dependency.v0.models.Library,
  versions: io.flow.play.util.PaginatedCollection[com.bryzek.dependency.v0.models.LibraryVersion],
  projectLibraryVersions: io.flow.play.util.PaginatedCollection[com.bryzek.dependency.v0.models.ProjectLibraryVersion]
)(implicit flash: Flash, messages: Messages)

@main(data.copy(title = Some(s"Library: ${library.groupId}.${library.artifactId}"))) {

  <ul>
    <li>Group ID: <a href="@routes.SearchController.index(q = Some(com.bryzek.dependency.lib.SearchQuery(groupId = Some(library.groupId)).query))">@library.groupId</a></li>
    <li>Artifact ID: <a href="@routes.SearchController.index(q = Some(com.bryzek.dependency.lib.SearchQuery(groupId = Some(library.groupId), artifactId = Some(library.artifactId)).query))">@library.artifactId</a></li>
    <li>Resolvers:
      <ul>
        @library.resolvers.map { resolver =>
          <li> @resolver</li>
        }
      </ul>
    </li>
    <li>@audit(library.audit)</li>
  </ul>

  <h3>Versions</h3>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Version</th>
          <th>Cross built for</th>
        </tr>
      </thead>
      @versions.items.map { version =>
        <tr>
          <td>@version.version</td>
          <td>@version.crossBuildVersion.getOrElse("")</td>
        </tr>
      }
    </table>
  </div>

  @if(versions.hasPrevious || versions.hasNext) {
    <ul class="pager">
      @if(versions.hasPrevious) {
        <li><a href="@routes.LibrariesController.show(library.guid, versionsPage = versions.page - 1, projectsPage = projectLibraryVersions.page)">Previous</a></li>
      }
      @if(versions.hasNext) {
        <li><a href="@routes.LibrariesController.show(library.guid, versionsPage = versions.page + 1, projectsPage = projectLibraryVersions.page)">Next</a></li>
      }
    </ul>
  }

  <h3>Projects</h3>
  <div class="table-responsive">
    <table class="table">
      @projectLibraryVersions.items.map { rec =>
        <tr>
          <td><a href="@routes.ProjectsController.show(rec.project.guid)">@{rec.project.name}</a></td>

          <td><a href="@routes.SearchController.index(q = Some(com.bryzek.dependency.lib.SearchQuery(groupId = Some(rec.libraryVersion.library.groupId)).query))">@rec.libraryVersion.library.groupId</td>
          <td><a href="@routes.SearchController.index(q = Some(com.bryzek.dependency.lib.SearchQuery(groupId = Some(rec.libraryVersion.library.groupId), artifactId = Some(rec.libraryVersion.library.artifactId)).query))">@rec.libraryVersion.library.artifactId</td>
          <td><a href="@routes.SearchController.index(q = Some(com.bryzek.dependency.lib.SearchQuery(groupId = Some(rec.libraryVersion.library.groupId), artifactId = Some(rec.libraryVersion.library.artifactId), version = Some(rec.libraryVersion.version)).query))">@rec.libraryVersion.version</td>
        </tr>
      }
    </table>
  </div>

  @if(projectLibraryVersions.hasPrevious || projectLibraryVersions.hasNext) {
    <ul class="pager">
      @if(projectLibraryVersions.hasPrevious) {
        <li><a href="@routes.LibrariesController.show(library.guid, versionsPage = versions.page, projectsPage = projectLibraryVersions.page - 1)">Previous</a></li>
      }
      @if(projectLibraryVersions.hasNext) {
        <li><a href="@routes.LibrariesController.show(library.guid, versionsPage = versions.page, projectsPage = projectLibraryVersions.page + 1)">Next</a></li>
      }
    </ul>
  }

}
