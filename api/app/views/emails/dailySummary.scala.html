@(person: com.bryzek.dependency.lib.Person,
  recommendations: Seq[com.bryzek.dependency.v0.models.Recommendation],
  lastEmail: Option[db.LastEmail],
  subscriptionsUrl: String
)

@if(!person.name.first.isEmpty) {
  <p>Dear @person.name.first.get,</p>
}

@if(lastEmail.isEmpty) {
  <p>

    Thanks for subscribing to your personalized daily summary of
    dependency recommendations. At any time, you can unsubscribe
    by visiting <a href="@subscriptionsUrl">@subscriptionsUrl</a>

  </p>

} else {

  <p>
  </p>

}
<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Project</th>
      <th>Name</th>
      <th>Current</th>
      <th>Recommended</th>
    </tr>
  </thead>
  @recommendations.map { rec =>
    <tr>
      <td>@com.bryzek.dependency.lib.DateHelper.shortDate(rec.audit.createdAt)</td>
      <td><a href="@routes.ProjectsController.show(rec.project.guid)">@{rec.project.name}</a></td>
      <td><a href="@com.bryzek.dependency.lib.Config.recommendationUrl(rec)">@com.bryzek.dependency.lib.Text.truncate(rec.name, 50)</a></td>
      <td>@rec.from</td>
      <td>@rec.to</td>
    </tr>
  }
</table>
  
@footer(subscriptionsUrl)
